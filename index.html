<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thiá»‡p Sinh Nháº­t ğŸ‚</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="countdown">3</div>
  <div id="greeting">ğŸ‰ ChÃºc Má»«ng Sinh Nháº­t ğŸ‚</div>
  
  <div class="card" id="card">
    <div class="card-inner">
      <div class="card-front">ğŸ Báº¥m vÃ o Ä‘Ã¢y nÃ¨ ğŸ‰</div>
      <div class="card-back">
        <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExZWgwZjJvd2xyZjc1MHZ3bDB3and4OXM3eTBvYmtsa3Qza3N6NXhtciZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/SJsflFD5WDKzVJpcqZ/giphy.gif" alt="Happy Birthday">
        <p>ğŸ‚ ChÃºc báº¡n sinh nháº­t tháº­t vui váº», nhiá»u niá»m vui, may máº¯n vÃ  háº¡nh phÃºc! ğŸ¥³ğŸ’–</p>
      </div>
    </div>
  </div>

  <!-- Nháº¡c MP3 -->
  <audio id="bg-music" loop>
    <source src="Happy Birthday Remix 2020 - Báº£n Nháº¡c Cá»§a HeineKen Äang ÄÆ°á»£c Sá»­ Dá»¥ng Nhiá»u TrÃªn Tik.mp3">
  </audio>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    const cdEl = document.getElementById("countdown");
    const greeting = document.getElementById("greeting");
    const card = document.getElementById("card");
    const music = document.getElementById("bg-music");

    // Countdown
    let countdown = 3;
    const interval = setInterval(() => {
      countdown--;
      if (countdown > 0) {
        cdEl.textContent = countdown;
      } else {
        clearInterval(interval);
        cdEl.style.display = "none";

        // PhÃ¡t nháº¡c
        music.play().catch(()=>{console.log("Autoplay bá»‹ cháº·n, sáº½ phÃ¡t khi user click")});

        // Hiá»‡n chá»¯ chÃºc má»«ng
        greeting.style.display = "block";

        // Confetti báº¯n trong 2s
        let duration = 2 * 1000;
        let end = Date.now() + duration;
        (function frame() {
          confetti({ particleCount: 5, spread: 120 });
          if (Date.now() < end) requestAnimationFrame(frame);
        })();

        // Sau 3s thÃ¬ hiá»‡n thiá»‡p
        setTimeout(() => {
          greeting.style.display = "none";
          card.style.display = "block";
        }, 3000);
      }
    }, 1000);

    // Click má»Ÿ thiá»‡p
    card.addEventListener("click", () => {
      card.classList.toggle("open");
      if (card.classList.contains("open")) {
        // Tim bay
        setInterval(() => {
          const heart = document.createElement("div");
          heart.classList.add("heart");
          heart.innerHTML = "â¤ï¸";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.top = "100vh";
          heart.style.fontSize = Math.random() * 20 + 20 + "px";
          document.body.appendChild(heart);
          setTimeout(() => heart.remove(), 5000);
        }, 500);

        // MÆ°a chá»¯ Happy Birthday
        setInterval(() => {
          const drop = document.createElement("div");
          drop.classList.add("rain-text");
          drop.textContent = "ğŸ‰ Happy Birthday ğŸ‰";
          drop.style.left = Math.random() * 100 + "vw";
          drop.style.animationDuration = (3 + Math.random() * 3) + "s";
          document.body.appendChild(drop);
          setTimeout(() => drop.remove(), 6000);
        }, 400);

        // BÃ³ng bay
        setInterval(() => {
          const balloon = document.createElement("div");
          balloon.classList.add("balloon");
          balloon.textContent = ["ğŸˆ","ğŸ‰","ğŸŠ","âœ¨"][Math.floor(Math.random()*4)];
          balloon.style.left = Math.random() * 100 + "vw";
          balloon.style.fontSize = (30 + Math.random()*20) + "px";
          balloon.style.animationDuration = (5 + Math.random() * 5) + "s";
          document.body.appendChild(balloon);
          setTimeout(() => balloon.remove(), 10000);
        }, 800);

        // Náº¿u nháº¡c chÆ°a cháº¡y do cháº·n -> phÃ¡t khi user click
        if (music.paused) music.play();
      }
    });
  </script>
</body>
</html>
